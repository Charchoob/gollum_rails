<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=US-ASCII" />
<title>
  File: README
  
    &mdash; Documentation by YARD 0.8.3
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" media="screen" charset="utf-8" />

  <link rel="stylesheet" href="css/common.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  hasFrames = window.top.frames.main ? true : false;
  relpath = '';
  framesUrl = "frames.html#!" + escape(window.location.href);
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div id="header">
      <div id="menu">
  
    <a href="_index.html">Index</a> &raquo; 
    <span class="title">File: README</span>
  

  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="class_list.html">
      Class List
    </a>
  
    <a class="full_list_link" id="method_list_link"
        href="method_list.html">
      Method List
    </a>
  
    <a class="full_list_link" id="file_list_link"
        href="file_list.html">
      File List
    </a>
  
</div>
      <div class="clear"></div>
    </div>

    <iframe id="search_frame"></iframe>

    <div id="content"><div id='filecontents'><h1>Gollum for Rails</h1>

<p><a href="https://travis-ci.org/nirnanaaa/gollum_rails"><img src="https://travis-ci.org/nirnanaaa/gollum_rails.png?branch=master" alt="Build Status"></a>
<a href="https://gemnasium.com/nirnanaaa/gollum_rails"><img src="https://gemnasium.com/nirnanaaa/gollum_rails.png" alt="Dependency Status"></a></p>

<p>Gollum for Rails combines the benefits from gollum with the flexibility of Rails.</p>

<p>It improves the lightweight &quot;gollum&quot; experience which is quite awesome.</p>

<p>You can:</p>

<ul>
<li>Define your own views</li>
<li>Use your Rails layouts</li>
<li>Embed it without mounting something in your Rack app</li>
<li>Use own preprocession e.g. Sidekiq for Async Syntax highlightning</li>
<li>Use user Authentication e.g. Devise or Authlogic</li>
</ul>

<h2>SYSTEM REQUIREMENTS</h2>

<ul>
<li>Python 2.5+ (2.7.3 recommended)</li>
<li>Ruby 1.8.7+ (1.9.3 recommended)</li>
<li>Unix like operating system (OS X, Ubuntu, Debian, and more)</li>
<li>Will not work on Windows (see <a href="https://github.com/github/gollum/blob/master/README.md#system-requirements">gollum</a>)</li>
</ul>

<h2>INSTALLATION</h2>

<p>Put</p>

<pre class="code ruby"><code><span class='id identifier rubyid_gem'>gem</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>gollum_rails</span><span class='tstring_end'>'</span></span>
</code></pre>

<p>in your <code>Gemfile</code></p>

<p>Then just run the <a href="http://gembundler.com/">Bundler</a></p>

<pre class="code ruby"><code>$ bundle install
</code></pre>

<p>To install GollumRails just run the <code>generator</code></p>

<p>$ rails g gollum_rails:install</p>

<p># for help
  $ rails g gollum_rails:install --help</p>

<p>If you want you can add an initializer into e.g. <code>config/initializers/gollum_rails.rb</code>
instead of installing the application.</p>

<pre class="code ruby"><code>GollumRails::Wiki.new(&lt;location&gt;)
</code></pre>

<p>Now your gollum wiki is ready for use</p>

<p>To create a new ActiveModel / GollumRails::Page just run</p>

<pre class="code ruby"><code>rails g gollum_rails:model &lt;page&gt;
# make sure that the file does not exist
</code></pre>

<h2>CONFIGURATION</h2>

<p>The &quot;main&quot; configuration file is located under  <code>config/gollum.yml</code> in your Rails app</p>

<p>Content:</p>

<p># value: relative / absolute / auto
  #
  # relative will result in &#39;relative to Rails root/&#39;
  # absolute will result in &#39;/&#39;
  # auto will result in either /(prefixed) or <railsroot/>path
  #
  location_type: relative</p>

<p>#   location: db/wiki
  #   # or
  #   location: /var/www/wiki
  #
  location: db/wiki</p>

<p>#   # use
  #   i18n_messages: true
  #   # don&#39;t use
  #   i18n_messages: false
  #
  i18n_messages: true</p>

<p># Throw exceptions or only set <code>error</code> method
  throw_exceptions: false</p>

<p>If  you have <code>i18n</code> support enabled you should have a look at
<code>RAILSROOT/config/locales/gollum.&lt;LANG&gt;.yml</code>
which is already filled.</p>

<p>Format:</p>

<p>gollum_messages:
    <identifier>: <translated></p>

<h2>USAGE</h2>

<p>Accessible variables / methods are:</p>

<p>For: <code>GollumRails::Page</code></p>

<p>Every action, performing on a page returns a <code>String</code>, containing the commit id of the current action</p>

<p><strong>For each action you write on a wiki page, a commit must be given. The commit MUST be a <code>Hash</code></strong></p>

<pre class="code ruby"><code><span class='id identifier rubyid_commit_data'>commit_data</span> <span class='op'>=</span> <span class='lbrace'>{</span>
                <span class='symbol'>:message</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>what you have done?</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
                <span class='symbol'>:name</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>Florian Kasper</span><span class='tstring_end'>'</span></span><span class='comma'>,</span>
                <span class='symbol'>:email</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>nirnanaaa@khnetworks.com</span><span class='tstring_end'>'</span></span>
              <span class='rbrace'>}</span>
</code></pre>

<hr>

<p><strong>Create a new Page:</strong></p>

<p>Example for existing model <code>Page</code></p>

<pre class="code ruby"><code>page = Page.new {
               # an intuitive name
               # spaces will be replaced with `-` in file names and `-` will
               # be replaced with `____`(4 underscores)
               :name =&gt; 'Example page', #filename would be `Example-page` in this case

               # foobar
               :content =&gt; 'some very very very very long content',

               # for possible types see [wiki page](/nirnanaaa/gollum_rails/wiki/supported-formats)
               :format =&gt; :markdown,

               # from above
                         :commit =&gt; commit_data
                 }
</code></pre>

<p># saves the page in your Git repository
    page.save
  # there is also a <code>.save!</code> method to override the <code>config.throw_exceptions</code> and throw an exception on error</p>

<p>Thats it. Very easy.</p>

<hr>

<p><strong>Update an existing page</strong></p>

<pre class="code ruby"><code><span class='id identifier rubyid_page'>page</span> <span class='op'>=</span> <span class='const'>Page</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
<span class='id identifier rubyid_page'>page</span><span class='period'>.</span><span class='id identifier rubyid_find'>find</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>Example page</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span>
<span class='id identifier rubyid_page'>page</span><span class='period'>.</span><span class='id identifier rubyid_update'>update</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>some very long content</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='id identifier rubyid_commit_data'>commit_data</span><span class='rparen'>)</span>

<span class='comment'># you can also change the name
</span>
<span class='id identifier rubyid_page'>page</span><span class='period'>.</span><span class='id identifier rubyid_update'>update</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>some very long content</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='id identifier rubyid_commit_data'>commit_data</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>new-name</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span>

<span class='comment'># and the format (page will be recreated)
</span>
<span class='id identifier rubyid_page'>page</span><span class='period'>.</span><span class='id identifier rubyid_update'>update</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>some very long content</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='id identifier rubyid_commit_data'>commit_data</span><span class='comma'>,</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='symbol'>:wiki</span><span class='rparen'>)</span>
</code></pre>

<hr>

<p><strong>Delete a page</strong></p>

<p>#### Since v0.0.3
  # first you must have a Page instance
  found = Page.find(&#39;Example page&#39;)</p>

<p>found.delete(commit_data)</p>

<p># or
    Page.delete(found, commit_data)</p>

<pre class="code ruby"><code><span class='comment'># also you may wanna use `delete!`
</span></code></pre>

<p>####</p>

<hr>

<p><strong>Setting data manually</strong></p>

<pre class="code ruby"><code><span class='id identifier rubyid_page'>page</span> <span class='op'>=</span> <span class='const'>Page</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>

<span class='id identifier rubyid_page'>page</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>testpage</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_page'>page</span><span class='period'>.</span><span class='id identifier rubyid_content'>content</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>content</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_page'>page</span><span class='period'>.</span><span class='id identifier rubyid_format'>format</span> <span class='op'>=</span> <span class='symbol'>:markdown</span>
<span class='id identifier rubyid_page'>page</span><span class='period'>.</span><span class='id identifier rubyid_commit'>commit</span> <span class='op'>=</span> <span class='lbrace'>{</span>
                <span class='symbol'>:message</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>test action on page</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
                <span class='symbol'>:name</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>Florian Kasper</span><span class='tstring_end'>'</span></span><span class='comma'>,</span>
                <span class='symbol'>:email</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>nirnanaaa@khnetworks.com</span><span class='tstring_end'>'</span></span>
              <span class='rbrace'>}</span>
</code></pre>

<p><strong>Preview a page (AJAX/or not)</strong></p>

<pre class="code ruby"><code><span class='id identifier rubyid_page'>page</span> <span class='op'>=</span> <span class='const'>Page</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
<span class='id identifier rubyid_preview'>preview</span> <span class='op'>=</span> <span class='id identifier rubyid_page'>page</span><span class='period'>.</span><span class='id identifier rubyid_preview'>preview</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>testpage</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>content</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='comment'># or page.preview(&quot;testpage&quot;, &quot;content&quot;, :format)
</span>
<span class='comment'># preview contains the HTML rendered data!
</span></code></pre>

<p><strong>Show pages versions</strong></p>

<pre class="code ruby"><code><span class='id identifier rubyid_page'>page</span> <span class='op'>=</span> <span class='const'>Page</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
<span class='id identifier rubyid_page'>page</span><span class='period'>.</span><span class='id identifier rubyid_find'>find</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>testpage</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='id identifier rubyid_versions'>versions</span> <span class='op'>=</span> <span class='id identifier rubyid_page'>page</span><span class='period'>.</span><span class='id identifier rubyid_versions'>versions</span>

<span class='id identifier rubyid_versions'>versions</span><span class='period'>.</span><span class='id identifier rubyid_all'>all</span>
<span class='comment'># =&gt; #&lt;Grit::Commit &quot;83a5e82a58eb4afda2662b7ca665b64554baf431&quot;&gt;,
</span>     <span class='comment'>#&lt;Grit::Commit &quot;3a12080810acaf5cff3c2fb9bf67821943033548&quot;&gt;,
</span>     <span class='comment'>#&lt;Grit::Commit &quot;3b9ee74806b5cd59ec7d01fe4d974aa9974c816e&quot;&gt;,
</span>     <span class='comment'>#&lt;Grit::Commit &quot;c1507f5c47ae5bee16dea3ebed2f177dbcf48a68&quot;&gt;,
</span>

<span class='id identifier rubyid_versions'>versions</span><span class='period'>.</span><span class='id identifier rubyid_latest'>latest</span>
<span class='comment'># =&gt; #&lt;Grit::Commit &quot;3a12080810acaf5cff3c2fb9bf67821943033548&quot;&gt;
</span>
<span class='id identifier rubyid_versions'>versions</span><span class='period'>.</span><span class='id identifier rubyid_oldest'>oldest</span>
<span class='comment'># =&gt; #&lt;Grit::Commit &quot;6d71571d379cfe863933123ea93dea4aac1d6eb64&quot;&gt;
</span>
<span class='id identifier rubyid_versions'>versions</span><span class='period'>.</span><span class='id identifier rubyid_find'>find</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>6d71571d379cfe86393135ea93dea4aac1d6eb64</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='comment'># =&gt; #&lt;Grit::Commit &quot;6d71571d379cfe863933123ea93dea4aac1d6eb64&quot;&gt;
</span></code></pre>

<h2>TODO</h2>

<ul>
<li>List all pages</li>
<li>Search pages</li>
<li>embed gollum :markdown editor</li>
</ul>

<h2>DEVELOPER</h2>

<p>Very cool. Just fork this repository and send  pull requests ;)</p>

<h3>QUICK START</h3>

<p>Clone the repository:</p>

<pre class="code ruby"><code>$ git clone git://github.com/nirnanaaa/gollum_rails.git
</code></pre>

<p>Run the <a href="http://gembundler.com/">Bundler</a>:</p>

<pre class="code ruby"><code>$ bundle install
</code></pre>

<h3>TESTING</h3>

<p>First use the Quick Start to install all dependencys.
All tests are stored under the <code>test/</code> directory.</p>

<p>First you must create a <code>wiki</code> repository.</p>

<pre class="code ruby"><code>$ git init test/wiki
</code></pre>

<p>To run tests just use the <code>rake</code> command:</p>

<pre class="code ruby"><code>$ bundle exec rake
</code></pre>

<p>BE CAREFUL! THE FIRST TEST WILL FAIL BECAUSE THE NECESSARY STATIC FILES ARE NOT EXISTING</p>

<h2>EXAMPLE</h2>
</div></div>

    <div id="footer">
  Generated on Wed Jan 30 14:59:34 2013 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.8.3 (ruby-1.9.3).
</div>

  </body>
</html>